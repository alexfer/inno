{% extends 'market_place/index.html.twig' %}

{% block title %}Hello CategoryController!{% endblock %}

{% block content_body %}

    <div class="display-6 mb-3">{{ category.name }}</div>
    <ul class="list-inline mb-4">
        {% for child in category.children %}
            <li class="list-inline-item category">
                <a href="{{ path('app_market_place_child_category', {parent: category.slug, child: child.slug}) }}"
                   class="btn btn-outline-primary rounded-1 bg-opacity-25 category-link">
                    {{ child.name }} <i class="bi bi-arrow-right-short"></i>
                </a>
            </li>
        {% endfor %}
    </ul>
    <div class="row g-4">
        {% for product in products %}
            <div class="col-sm-6 col-lg-4 col-xl-3">
                <div class="card shadow-sm h-100">
                    <div class="position-relative">
                        <img src="{{ asset('img/08.jpg') }}" class="card-img-top h-100" alt="...">
                        <div class="card-img-overlay p-3 z-index-1">
                            <div class="badge text-bg-dark bg-opacity-75">
                                {% if category.parent is not null %}
                                    <a href="{{ path('app_market_place_parent_category', {parent:  category.parent.slug}) }}"
                                       class="link-white">
                                        {{ category.parent.name }}
                                    </a>
                                {% else %}
                                    <a href="{{ path('app_market_place_parent_category', {parent:  category.slug}) }}"
                                       class="link-white">
                                        {{ product.category_name }}
                                    </a>
                                {% endif %}
                            </div>
                            <div class="badge text-bg-danger bg-opacity-75">New</div>
                        </div>
                    </div>
                    <div class="card-body px-1">
                        <ul class="list-inline text-end me-2 mb-3">
                            <li class="list-inline-item position-absolute start-0 ms-3">
                                <a class="btn btn-primary rounded-0"
                                   data-id="{{ product.market_id }}-{{ product.id }}"
                                   type="button">
                                    <i class="bi bi-cart"></i>
                                </a>
                            </li>
                            <li class="list-inline-item">
                                <div class="badge bg-success bg-opacity-25 text-success">
                                    <h5 class="mb-0">{{ product.cost|number_format(2, '.', ' ') }}
                                        <small>{{ product.currency|currency }}</small></h5>
                                </div>
                            </li>
                        </ul>
                        <h5 class="card-title h-auto mb-1 mt-3 mx-3">
                            <a title="{{ product.name }}"
                               href="#product/{{ product.market_slug }}/{{ product.slug }}">{{ product.short_name }}</a>
                        </h5>
                    </div>
                    <a href="{{ path('app_market_place_child_category', {parent: category.slug, child: product.category_slug}) }}"
                       class="badge-child"><i
                                class="bi bi-ui-radios-grid text-opacity-50 me-2"></i> {{ product.category_name }}</a>
                    <div class="card-footer border-0 bg-transparent">
                        <ul class="list-group list-group-borderless mt-1 mb-2">
                            <li class="list-group-item small px-1 py-1  border-0">
                                <i class="bi bi-pin-map-fill me-2 text-opacity-50 text-info"></i>
                                <a class="text-decoration-none"
                                   href="#{{ product.market_slug }}">{{ product.market }}</a>
                            </li>
                            <li class="list-group-item small px-1 py-1  border-0">
                                <i class="bi bi-telephone-fill text-secondary me-2"></i> <span
                                        class="text-secondary">{{ product.phone }}</span>
                            </li>
                        </ul>
                        <div class="d-flex justify-content-between align-items-center">
                            <a href="#"
                               class="btn btn-link text-decoration-none p-0 mb-0">{{ 'market.product.details'|trans }}
                                <i class="bi bi-arrow-right ms-1"></i>
                            </a>
                            <a href="#" class="z-index-2"><i class="bi bi-heart-fill text-danger"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}
