{% for message in app.flashes('danger') %}
    <div class="alert alert-danger">
        {{ message }}
    </div>
{% endfor %}
<ul class="nav nav-tabs border-bottom customer-info mt-lg-2" id="info" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link text-secondary border-0 fs-6 active" id="customer-tab" data-bs-toggle="tab"
                data-bs-target="#customer-info"
                type="button" role="tab" aria-controls="customer-info"
                aria-selected="true">{{ 'customer.cabinet.personal_information'|trans }}</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link text-secondary border-0 fs-6" id="product-info-tab" data-bs-toggle="tab"
                data-bs-target="#product-info"
                type="button" role="tab" aria-controls="product-info"
                aria-selected="false">{{ 'customer.cabinet.delivery_address'|trans }}</button>
    </li>
</ul>
<div class="pt-2 px-2 pe-lg-0">
    <h2 class="h6 border-bottom pb-3 mb-3">{{ 'product.billing'|trans }}</h2>
    {{ form_start(form, {attr: {class: 'needs-validation', novalidate: ''}}) }}
    <div class="row pb-4 gx-4 gy-3">
        <div class="form-floating col-sm-6">
            {{ form_widget(form.first_name, {attr: {class: 'form-control', placeholder: ''}}) }}
            {{ form_label(form.first_name, 'label.form.first_name', {label_attr: {class: 'form-label ms-3'}}) }}
            <div class="invalid-feedback">{{ 'form.first_name.invalid'|trans }}</div>
        </div>
        <div class="form-floating col-sm-6">
            {{ form_widget(form.last_name, {attr: {class: 'form-control', placeholder: ''}}) }}
            {{ form_label(form.last_name, 'label.form.last_name', {label_attr: {class: 'form-label ms-3'}}) }}
            <div class="invalid-feedback">{{ 'form.last_name.invalid'|trans }}</div>
        </div>
        <div class="form-floating col-12">
            {{ form_widget(form.email, {attr: {class: 'form-control', placeholder: ''}}) }}
            {{ form_label(form.email, 'label.form.email', {label_attr: {class: 'form-label ms-3'}}) }}
            <div class="invalid-feedback">{{ 'form.country.invalid'|trans }}</div>
        </div>
        <div class="form-floating col-sm-6">
            {{ form_widget(form.phone, {attr: {class: 'form-control', placeholder: ''}}) }}
            {{ form_label(form.phone, 'label.form.phone', {label_attr: {class: 'form-label ms-3'}}) }}
            <div class="invalid-feedback">{{ 'form.phone.invalid'|trans }}</div>
        </div>
        <div class="form-floating col-sm-6">
            {{ form_widget(form.country, {attr: {class: 'form-select', placeholder: ''}}) }}
            {{ form_label(form.country, 'label.form.country', {label_attr: {class: 'form-label ms-3'}}) }}
            <div class="invalid-feedback">{{ 'form.country.invalid'|trans }}</div>
        </div>
    </div>
    <div class="accordion mb-2" id="payment-method" role="tablist">
        {% for key, gateway in order.market.marketPaymentGatewayMarkets.toArray %}
            <div class="accordion-item">
                <h3 class="accordion-header">
                    <a class="accordion-button{% if key != 0 %} collapsed{% endif %}" href="#gateway-{{ key }}"
                       role="button"
                       data-bs-toggle="collapse"
                       aria-expanded="{% if loop.first %}true{% else %}false{% endif %}">
                        <i class="{{ gateway.gateway.icon }} me-2"></i>{{ gateway.gateway.name }}
                    </a>
                </h3>
                <div class="accordion-collapse collapse {% if loop.first %}show{% endif %}"
                     id="gateway-{{ key }}" data-bs-parent="#payment-method" role="tabpanel">
                    <div class="accordion-body">
                        <div class="mb-2">{{ gateway.gateway.summary }}</div>
                        <button type="submit" name="gateway[{{ gateway.gateway.slug }}]"
                                class="btn btn-danger rounded-1">
                            {{ gateway.gateway.handlerText }}
                        </button>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
    {{ form_end(form) }}
</div>