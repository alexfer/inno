{% extends 'base.html.twig' %}

{% block title %}{{ 'title.blogs'|trans }}{% endblock %}

{% block body %}
    <div class="page-title-area blog">
        <div class="d-table">
            <div class="d-table-cell"></div>
        </div>
    </div>
    <div class="container py-2">
        <div class="card border-0 bg-light">
            <div class="card-header py-3 border-bottom-0 display-6 fs-4">
                {% if category %}
                    {{ category.name }}
                    {% set _active = category.id %}
                {% else %}
                    {{ 'text.blog.desc'|trans|raw }}
                    {% set _active = 0 %}
                {% endif %}
            </div>
            <div class="card-body bg-white">
                {% if category %}
                    <p>{{ category.description }}</p>
                {% endif %}
            </div>
        </div>
        <div class="row">
            {% if categories %}
                <div class="col-12 entry-tags">
                    {% for key, category in categories %}
                        {% if key < 8 %}
                            <a href="{{ path('app_blog_category', {slug: category.slug}) }}"
                               class="{% if _active == category.id %}active{% endif %}"
                               title="{{ category.description }}">{{ category.name }}</a>
                        {% else %}
                            <a href="{{ path('app_blog_category', {slug: category.slug}) }}"
                               class="visually-hidden{% if _active == category.id %} active{% endif %}"
                               title="{{ category.description }}">{{ category.name }}</a>
                        {% endif %}
                    {% endfor %}
                    {% if categories|length > 8 %}
                        <a href="#" class="load-categories" title="...">...</a>
                    {% endif %}
                </div>
            {% endif %}
        </div>
    </div>
    <section class="section-area default bg-white">
        <div class="container">
            <div class="row">
                {% for entry in entries %}
                    <div class="blog-block col-sm-8 col-lg-6 col-xl-4">
                        <div class="card shadow h-100">
                            <div class="blog-img-block">
                                {% set _picture = 'storage/entry/picture/' ~ entry.id ~ '/' ~ entry.attach %}
                                <a href="{{ path('app_blog_view', {slug: entry.slug}) }}">
                                    {% if entry.attach %}
                                        <img src="{{ asset(_picture)|imagine_filter('entry_preview') }}" class="blog-img" width="415" alt="{{ entry.title }}"/>
                                    {% else %}
                                        <img src="{{ asset('http://placehold.it/380x200') }}" class="blog-img" alt="Missing image for entry: {{ entry.title }}"/>
                                    {% endif %}
                                </a>
                            </div>
                            <div class="card-body p-3 mb-3">
                                <a class="text-truncate fs-5 fw-normal" href="{{ path('app_blog_view', {slug: entry.slug}) }}">
                                    {{ entry.title }}
                                </a>
                            </div>
                            <div class="card-footer text-end">
                                <ul>
                                    <li>
                                        <a target="_blank"
                                           href="">
                                            @{{ entry.first_name }}
                                        </a>
                                        <i class="bi bi-person-fill"></i>
                                    </li>
                                    <li>
                                        <i class="text-muted bi bi-calendar-date"></i>
                                        <small>{{ entry.created_at|date(date_format) }}</small>
                                    </li>
                                    <li>
                                        <small class="text-muted">Follows</small>
                                    </li>
                                    <li>
                                        <a href="">
                                            <i class="bi bi-facebook"></i>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="">
                                            <i class="bi bi-twitter"></i>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="">
                                            <i class="bi bi-instagram"></i>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                {% else %}
                    <img class="d-block mx-auto mb-5 border-0 h-25 w-25 shadow-none" src="{{ asset('img/404.png') }}" width="340" alt="{{ 'table.footer.not_found'|trans }}">
                    <p class="text-center">{{ 'table.footer.not_found'|trans }}</p>
                {% endfor %}
            </div>
        </div>
    </section>
{% endblock %}
