<div class="sidebar-header">
    <div class="user-pic">
        {% for picture in app.user.details.attach|slice(0, 1) %}
            {% set _picture = 'user/picture/' ~ app.user.id ~ '/' ~ picture.name %}
            <img class="img-responsive img-rounded" src="{{ asset(_picture) | imagine_filter('user_thumb') }}" alt="{{ app.user.details.firstName }} {{ app.user.details.lastName }}">
        {% else %}  
            <img class="img-responsive img-rounded" src="{{ asset('img/user-picture.jpg') }}" alt="{{ app.user.details.firstName }} {{ app.user.details.lastName }}">
        {% endfor %}
    </div>
    <div class="user-info">
        <span class="user-name">{{ app.user.details.firstName }}
            <strong>{{ app.user.details.lastName }}</strong>
        </span>
        <span class="user-role">{{ app.user.roles[0]|replace({'ROLE_': ''})|capitalize }}</span>
        <span class="user-status">
            <i class="bi bi-circle-fill"></i>
            <span>Online</span>
        </span>
    </div>
</div>        
{% set _parts = _route|split('_') %}
{% set _status = _parts[_parts|length == 2 ? 1 : 2] %}
<ul class="nav flex-column py-2">    
    <li class="nav-item">        
        <a class="nav-link {{ _route == 'app_dashboard'? 'active': '' }}" href="{{ path('app_dashboard') }}">
            <i class="bi bi-house"></i> 
            {{ 'menu.dashboard'|trans }}
        </a>
    </li>
    {% if is_granted('ROLE_ADMIN') %}
        <li class="nav-item">
            <a 
                class="nav-link {{ _route == 'app_dashboard_faq'? 'active': '' }}" 
                href="{{ path('app_dashboard_faq') }}"
                data-toggle="collapse" 
                data-target=".faq" 
                aria-expanded="{{ _status == 'faq'? 'true': 'false'}}" 
                aria-controls="faq">
                <i class="bi bi-question"></i> 
                {{ 'menu.dashboard.faq'|trans }}
                <i class="bi bi-arrow-right-short arrow"></i>
            </a>
            <div class="collapse faq {{ _status == 'faq'? 'show': ''}}">
                <a class="nav-link {{ _route == 'app_dashboard_faq'? 'active': '' }}" href="{{ path('app_dashboard_faq') }}">
                    <i class="bi bi-arrow-right-short"></i>
                    {{ 'menu.dashboard.overview'|trans }}
                </a>
                <a class="nav-link {{ _route == 'app_dashboard_faq_create'? 'active': '' }}" href="{{ path('app_dashboard_faq_create') }}">
                    <i class="bi bi-arrow-right-short"></i>
                    {{ 'menu.dashboard.create_faq'|trans }}
                </a>
            </div>
            <a class="nav-link {{ _route == 'app_dashboard_user'? 'active': '' }}" href="{{ path('app_dashboard_user') }}">
                <i class="bi bi-person"></i> 
                {{ 'menu.dashboard.users'|trans }}
            </a>
            <a class="nav-link {{ _route == 'app_dashboard_contact'? 'active': '' }}" href="{{ path('app_dashboard_contact') }}">
                <i class="bi bi-envelope-at"></i> 
                {{ 'menu.dashboard.contacts'|trans }}
            </a>
        </li>
    {% endif %}    
    <li class="nav-item">        
        {% for key, nav in navbar|sort %}
            <a 
                class="nav-link {{ _status == nav ? 'active': '' }}" 
                href="#" 
                data-toggle="collapse" 
                data-target=".{{ key }}" 
                aria-expanded="{{ _status == key ? 'true': 'false'}}" 
                aria-controls="{{ key }}">
                <i class="bi bi-person-workspace"></i>
                {{ key|replace({'_': ' '})|capitalize }}
                <span class="badge badge-pill badge-success mx-2">3</span>
                <i class="bi bi-arrow-right-short arrow"></i>
            </a>
            <div class="collapse {{ key }} {{ _status == key ? 'show': ''}}">
                {% for message, route in childrens[key] %}
                    <a class="nav-link {{ _route == route ? 'active' : '' }}" href="{{ path(route) }}">
                        <i class="bi bi-arrow-right-short"></i>
                        {{ message|trans }}
                    </a>
                {% endfor %}
            </div>
        {% endfor %}        
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{{ path('app_logout') }}">
            <i class="bi bi-lock-fill"></i> 
            Logout
        </a>
    </li>
</ul>